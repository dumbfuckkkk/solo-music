<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Solo Music</title>
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
<meta name="theme-color" content="#ffffff">

<style>
/* =====================================================
   DESIGN SYSTEM
===================================================== */
:root{
  --bg:#ffffff;
  --bg-elev:#f5f5f7;
  --text:#000000;
  --sub:#6e6e73;
  --accent:#ff2d55;
  --border:#e5e5ea;
}
body.dark{
  --bg:#000000;
  --bg-elev:#1c1c1e;
  --text:#ffffff;
  --sub:#8e8e93;
  --border:#2c2c2e;
}

/* =====================================================
   BASE
===================================================== */
*{box-sizing:border-box}
body{
  margin:0;
  font-family:-apple-system,BlinkMacSystemFont,"SF Pro Text",
               "Segoe UI",Roboto,system-ui;
  background:var(--bg);
  color:var(--text);
  -webkit-tap-highlight-color:transparent;
}
iframe{display:none}

/* =====================================================
   SCREENS
===================================================== */
.screen{
  display:none;
  padding:20px;
  padding-bottom:160px;
}
.screen.active{display:block}
h1{
  font-size:32px;
  font-weight:700;
  margin:0 0 16px;
}

/* =====================================================
   SEARCH / LIST
===================================================== */
input{
  width:100%;
  padding:14px;
  border-radius:14px;
  border:none;
  background:var(--bg-elev);
  color:var(--text);
}
.item{
  display:flex;
  gap:12px;
  padding:14px 0;
}
.item img{
  width:56px;height:56px;border-radius:10px;
}
.title{font-weight:600}
.artist{font-size:13px;opacity:.7}

/* =====================================================
   MINI PLAYER
===================================================== */
.mini{
  position:fixed;
  bottom:60px;
  left:8px;
  right:8px;
  background:var(--bg-elev);
  border-radius:14px;
  display:none;
  align-items:center;
  gap:12px;
  padding:10px;
  box-shadow:0 10px 30px rgba(0,0,0,.12);
  touch-action:pan-x;
}
.mini img{width:42px;height:42px;border-radius:8px}
.mini button{
  margin-left:auto;
  background:none;
  border:none;
  font-size:22px;
  color:var(--accent);
}

/* =====================================================
   FULL PLAYER
===================================================== */
.full{
  position:fixed;
  inset:0;
  background:var(--bg);
  display:none;
  flex-direction:column;
  padding:16px;
  touch-action:manipulation;
}
.full img{
  width:80%;
  margin:40px auto;
  border-radius:18px;
  box-shadow:0 20px 50px rgba(0,0,0,.25);
}
.center{text-align:center}
.controls{
  display:flex;
  justify-content:center;
  gap:40px;
  font-size:32px;
  color:var(--accent);
}
.subcontrols{
  display:flex;
  justify-content:center;
  gap:30px;
  font-size:20px;
  color:var(--accent);
  margin-top:10px;
}
input[type=range]{
  width:90%;
  margin:20px auto;
  display:block;
}

/* =====================================================
   QUEUE
===================================================== */
.queue-item{
  padding:8px 0;
  font-size:14px;
  border-bottom:1px solid var(--border);
}

/* =====================================================
   TABS
===================================================== */
.tabs{
  position:fixed;
  bottom:0;
  left:0;
  right:0;
  height:56px;
  display:flex;
  justify-content:space-around;
  align-items:center;
  background:var(--bg);
  border-top:1px solid var(--border);
}
.tabs button{
  background:none;
  border:none;
  font-size:12px;
  color:var(--sub);
}
.tabs button.active{color:var(--accent)}
</style>
</head>

<body>

<!-- BROWSE -->
<section id="browse" class="screen active">
  <h1>Browse</h1>
  <p style="opacity:.6">Music you recently played will appear here.</p>
</section>

<!-- SEARCH -->
<section id="search" class="screen">
  <h1>Search</h1>
  <input id="q" placeholder="Search music">
  <div id="results"></div>
</section>

<!-- LIBRARY -->
<section id="library" class="screen">
  <h1>Library</h1>
  <div id="library"></div>
</section>

<!-- MINI PLAYER -->
<div class="mini" id="mini">
  <img id="miniArt">
  <div>
    <div class="title" id="miniTitle"></div>
    <div class="artist" id="miniArtist"></div>
  </div>
  <button onclick="openFull()">‚ñ∂</button>
</div>

<!-- FULL PLAYER -->
<div class="full" id="full">
  <button onclick="closeFull()">‚Üì Now Playing</button>
  <img id="fullArt">
  <div class="center">
    <div id="fullTitle" class="title"></div>
    <div id="fullArtist" class="artist"></div>
  </div>

  <input type="range" id="progress" value="0">

  <div class="controls">
    <span onclick="prev()">‚èÆ</span>
    <span onclick="togglePlay()">‚ñ∂</span>
    <span onclick="next()">‚è≠</span>
  </div>

  <div class="subcontrols">
    <span id="shuffleBtn" onclick="toggleShuffle()">üîÄ</span>
    <span id="repeatBtn" onclick="toggleRepeat()">üîÅ</span>
  </div>

  <div id="queue"></div>
</div>

<!-- TABS -->
<nav class="tabs">
  <button class="active" onclick="show('browse',this)">Browse</button>
  <button onclick="show('search',this)">Search</button>
  <button onclick="show('library',this)">Library</button>
  <button onclick="toggleTheme()">üåô</button>
</nav>

<div id="player"></div>

<script src="https://www.youtube.com/iframe_api"></script>
<script>
/* ================= CONFIG ================= */
const API_KEY="AIzaSyCgBTS9RdzT3nZcmzgYwltu4qf7Jl86WMk";

/* ================= STATE ================= */
let queue=[], index=-1;
let shuffle=false;
let repeat="off";
let playing=false;
let yt;

/* ================= YT API ================= */
function onYouTubeIframeAPIReady(){
  yt=new YT.Player("player",{
    height:"0",width:"0",
    events:{onStateChange:onPlayerState}
  });
}

/* ================= SEARCH ================= */
q.onkeydown=e=>{if(e.key==="Enter")search(q.value)};
function search(term){
 fetch(`https://www.googleapis.com/youtube/v3/search?part=snippet&type=video&maxResults=10&q=${encodeURIComponent(term)}&key=${API_KEY}`)
 .then(r=>r.json()).then(d=>{
  results.innerHTML="";
  d.items.forEach(v=>{
    const div=document.createElement("div");
    div.className="item";
    div.innerHTML=`
      <img src="${v.snippet.thumbnails.medium.url}">
      <div>
        <div class="title">${v.snippet.title}</div>
        <div class="artist">${v.snippet.channelTitle}</div>
      </div>`;
    div.onclick=()=>add(v);
    results.appendChild(div);
  });
 });
}

/* ================= PLAYER ================= */
function add(v){
 queue.push(v);
 if(index===-1){index=0;load();}
 renderQueue();
}
function load(){
 if(!yt) return;
 const v=queue[index];
 yt.loadVideoById(v.id.videoId);
 playing=true;

 mini.style.display="flex";
 miniArt.src=v.snippet.thumbnails.medium.url;
 miniTitle.innerText=v.snippet.title;
 miniArtist.innerText=v.snippet.channelTitle;

 fullArt.src=v.snippet.thumbnails.high.url;
 fullTitle.innerText=v.snippet.title;
 fullArtist.innerText=v.snippet.channelTitle;
}
function togglePlay(){
 playing?yt.pauseVideo():yt.playVideo();
 playing=!playing;
 haptic(10);
}
function next(){
 haptic(25);
 if(shuffle) index=Math.floor(Math.random()*queue.length);
 else if(index<queue.length-1) index++;
 else if(repeat==="all") index=0;
 load();
}
function prev(){
 haptic(25);
 if(index>0){index--;load();}
}

/* ================= SHUFFLE / REPEAT ================= */
function toggleShuffle(){
 shuffle=!shuffle;
 shuffleBtn.style.opacity=shuffle?1:.4;
 haptic(10);
}
function toggleRepeat(){
 repeat=repeat==="off"?"all":repeat==="all"?"one":"off";
 repeatBtn.innerText=repeat==="one"?"üîÇ":"üîÅ";
 haptic(10);
}

/* ================= PROGRESS ================= */
setInterval(()=>{
 if(!yt||!yt.getDuration) return;
 progress.max=yt.getDuration();
 progress.value=yt.getCurrentTime();
},500);
progress.oninput=e=>yt.seekTo(e.target.value,true);

/* ================= END ================= */
function onPlayerState(e){
 if(e.data===0){
  if(repeat==="one") load();
  else next();
 }
}

/* ================= QUEUE UI ================= */
function renderQueue(){
 const q=document.getElementById("queue");
 q.innerHTML="";
 queue.forEach((v,i)=>{
  const d=document.createElement("div");
  d.className="queue-item";
  d.innerText=(i===index?"‚ñ∂ ":"")+v.snippet.title;
  d.onclick=()=>{index=i;load()};
  q.appendChild(d);
 });
}

/* ================= UI ================= */
function openFull(){full.style.display="flex"}
function closeFull(){full.style.display="none"}
function show(id,btn){
 document.querySelectorAll(".screen").forEach(s=>s.classList.remove("active"));
 document.getElementById(id).classList.add("active");
 document.querySelectorAll(".tabs button").forEach(b=>b.classList.remove("active"));
 btn.classList.add("active");
}
function toggleTheme(){document.body.classList.toggle("dark")}

/* ================= HAPTIC ================= */
function haptic(ms){
 if(navigator.vibrate) navigator.vibrate(ms);
}
</script>
</body>
</html>
